<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>ChangelogMaker - FrikyBot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- GENERAL CSS -->
    <link href="../../styles/standard.css" rel="stylesheet">
    <link href="../../styles/Grid/Grid_Foundation.css" rel="stylesheet">

    <!-- PAGE CSS-->
    <link href="../../styles/Grid/Grid_Default.css" rel="stylesheet">

    <!-- GENERAL JS-->
    <script src="../../scripts/standard.js"></script>

    <!-- MISC -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

    <script src="../misc/NavigationV2/NavigationV2.js"></script>
    <link href="../misc/NavigationV2/NavigationV2.css" rel="stylesheet">

    <script src="../misc/OUTPUT/OUTPUT.js"></script>
    <link href="../misc/OUTPUT/OUTPUT.css" rel="stylesheet">

    <script src="../misc/BOT_STATUS/BOT_STATUS.js"></script>
    <link href="../misc/BOT_STATUS/BOT_STATUS.css" rel="stylesheet">

    <script src="../misc/Login/Login.js"></script>
    <link href="../misc/Login/Login.css" rel="stylesheet">

    <script src="../News/News_scripts"></script>
    <script src="../News/changelog_scripts"></script>
    <link href="../News/changelog_styles" rel="stylesheet">

    <script src="../misc/SwitchButton/SwitchButton.js"></script>
    <link href="../misc/SwitchButton/SwitchButton.css" rel="stylesheet">

    <style>
        .darkmode #grid #content {
            background-color: #292929 !important;
            color: white;
        }
    </style>
</head>
<body onload="Standard_Page_Init(); init();">
    <!-- MAIN GRID -->
    <div id="grid">
        <!-- NAVI HEADER -->
        <div class="cellM" id="naviHeader">
            <a href="../../">FRIKY<span>BOT</span></a>
        </div>

        <!-- CONTENT HEADER -->
        <div class="cellM" id="contentHeader">

        </div>

        <!-- NAVI -->
        <div class="cellM" id="navi">
            <div id="BOT_STATUS_DETAILS_MINI">

            </div>
            <div id="mainNavi">

            </div>
            <button id="LightModeButton" onclick="toggleLightMode()">DarkMode</button>
            <div id="license"> - <a href="https://fontawesome.com/license" target="_blank">Icon license</a> - </div>
        </div>

        <!-- ACTUAL CONTENT -->
        <div class="cellM" id="content" style="background-color: #f5f5f5;">

            <script>
                const INPUT_TEXT_KEYWORDS = {
                    'c': 'COMMENT',
                    'a': 'ADDED',
                    'r': 'REMOVED',
                    'ch': 'CHANGED',
                    'w': 'WARNING'
                };
                const TEST_DATA = {
                    "date": 1621447200000,
                    "title": "WEBSITE START Changelog - 13. SEPTEMBER 2020",
                    "chapters": {
                        "Introduction": [
                            {
                                "type": "PLAIN",
                                "paragraphs": [
                                    "FrikyBot Changelogs now available for pretty much any Changes! More Features/Details will be added in the Future, but this is a pretty good start i´d say!",
                                    "Check the <a href=''>Documentation</a> for more details!"
                                ]
                            }
                        ],
                        "CORE MODULE CHANGES": [
                            {
                                "type": "CHANGES",
                                "module_type": "LOGGER",
                                "contents": [
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Added Logging support to all Packages and CORE Modules."
                                            },
                                            {
                                                "type": "COMMENT",
                                                "text": "Logging enables a more clean and structured Console Output, aswell as an option to export them to a File (for Debugging/Crash Reports) or to give an external Log for Administrators!"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "CHANGES",
                                "module_type": "SERVER",
                                "contents": [
                                    {
                                        "type": "HEADER",
                                        "text": "General"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "CHANGED",
                                                "text": "Changed Config Setup - now using multiple Files and a more streamlined Checking/Updating flow."
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added a Console based Setup Wizrad allowing minimal Config Settings."
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "Console Input"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Added Support for Console Commands controlling Packages, Modules and more!"
                                            },
                                            {
                                                "type": "COMMENT",
                                                "text": "First Step for external controlling of the core Bot functionality. More will follow, once the Foundation of the Server- and Website-Interfaces are set."
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "HTML"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "CHANGED",
                                                "text": "Changed Routing of ALL Endpoints Routes by using express´s Routers and route()-functions."
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "API Endpoints"
                                    },
                                    {
                                        "type": "LIST",
                                        "elements": [
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /BotStatus"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Navi"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Packages"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Cookies"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "PACKAGE CHANGES": [
                            {
                                "type": "CHANGES",
                                "module_type": "PACKAGE",
                                "packagename": "PACKAGEBASE",
                                "contents": [
                                    {
                                        "type": "HEADER",
                                        "text": "General"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "CHANGED",
                                                "text": "Changed Init and Setup of Packages. More details in the Docs."
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added Init()"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added PostInit()"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added reload()"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added enable()"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added disable()"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "Config / Settings"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "CHANGED",
                                                "text": "Changed Package Settings location and Setup. More details in the Docs."
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added loadSettings()"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added CheckSettings(settings: Object)"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added changeSettings(settings: Object)"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "HTML / API"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "CHANGED",
                                                "text": "Changed Package HTML/API hosting using Express.js Routers."
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added useDefaultFileRouter()"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added setFileRouter(router: ExpressRouter)"
                                            },
                                            {
                                                "type": "ADDED",
                                                "detailed": true,
                                                "text": "Added setAPIRouter(router: ExpressRouter)"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added Website Navigation Option for Pacakges -> setHTMLNavigation(data: Object)"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "Package Interconnect"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Package Interconnect - Share/add/remove/... Features between Packages."
                                            },
                                            {
                                                "type": "COMMENT",
                                                "text": "Package Interconnects are a KEY Element of the FrikyBot. Using others work to expand and make your own, is ALWAYS a good thing! More Information on how to use/supply Package Interconnections take a look into the Docs!"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "CHANGES",
                                "module_type": "PACKAGE",
                                "packagename": "NEWSFEED",
                                "contents": [
                                    {
                                        "type": "HEADER",
                                        "text": "General"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Added NewsFeed to the FrikyBot Website."
                                            },
                                            {
                                                "type": "COMMENT",
                                                "text": "A NewsFeed and a good Changelog is very important for Developers, but also for Users! Gives a small inside look, on what I am working on and what might come next! Soon this might also extend as a Twitter Bot?! but just maybe ;)"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "HTML"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News -> All News (Archive)"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/[News Page Identifier] -> Shows Extended Form of a News"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/NewsMaker -> Page where Admins/Editors/... can publish News"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/News_styles -> CSS Stylesheet used to Display various Types of News"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/News_scripts -> Javascript Script used to Display/Fetch News"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/Changelog -> All Changelogs (Archive)"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/Changelog_styles -> CSS Stylesheet used to Display various Types of Changelogs"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "Added /News/Changelog_scripts -> Javascript Script used to Display/Fetch Changelogs"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "detailed": true,
                                        "text": "API"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /latest"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /oldest"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /News"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "POST: /Publish"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Changelog"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Changelog/:changelog"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "type": "CHANGES",
                                "module_type": "PACKAGE",
                                "packagename": "DOCS",
                                "contents": [
                                    {
                                        "type": "HEADER",
                                        "text": "General"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Added Documentation for the FrikyBot Code."
                                            },
                                            {
                                                "type": "COMMENT",
                                                "text": "This will always be as good as I can, for my own sake in having a better overview of that mess :D"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "text": "HTML"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "Added /Docs -> All Documentation (Archive)"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "HEADER",
                                        "detailed": true,
                                        "text": "API"
                                    },
                                    {
                                        "type": "DASHED_PLAIN",
                                        "paragraphs": [
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Docs"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Docs/:module"
                                            },
                                            {
                                                "type": "ADDED",
                                                "text": "GET: /Docs/:module/:class"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    page: "TESTDATA"
                };
                let DROPMODE = null;
                let DROP_SRC_PARENT = null;

                function init() {
                    OUTPUT_create();
                    Bot_Status_Details_Settings.ErrorOutput = OUTPUT_showError;

                    //Check Query
                    let query = "";
                    if (GetURLSearchArray().length > 0) query = "?" + GetURLSearchArray()[0].name + "=" + GetURLSearchArray()[0].value[0];

                    fetchChangelog(query)
                        .then(json => {
                            CHANGELOGMAKER_fill(query == "" ? {} : json.Changelogs[0]);
                            CHANGELOGMAKER_updatePreview();
                            document.getElementById('NEWS_FEED_ChangelogMaker').style.display = "grid";
                            document.getElementById('SaveBTN').disabled = true;
                        })
                        .catch(err => {
                            console.log(err);
                            OUTPUT_showError(err.message);
                            OUTPUT_showError('ACCESS DENIED');
                        });
                }
            </script>

            <output></output>

            <div id="NEWS_FEED_ChangelogMaker">
                <div class="Editor">
                    <h1>CHANGELOG MAKER <button id="SaveBTN" onclick="CHANGELOGMAKER_save()" disabled>SAVE</button></h1>
                    <div style="position: relative; height: 30px;">
                        <input id="Editor_Input_Date" type="datetime-local" oninput="CHANGELOGMAKER_PageTitle(); CHANGELOGMAKER_updatePreview();" />
                    </div>
                    <input id="Editor_Input_Title" placeholder="Title here" oninput="CHANGELOGMAKER_PageTitle(); CHANGELOGMAKER_updatePreview();" />
                    <br />
                    <input id="Editor_Input_Page" placeholder="URL-Friendly Title here" oninput="CHANGELOGMAKER_updatePreview();" />

                    <div>
                        <div class="List">
                            <h4>Chapters</h4>
                            <img src="../images/icons/trash-alt-solid.svg" ondragover="CHANGELOGMAKER_allowTrashwDrop(event);" ondrop="CHANGELOGMAKER_dropTrash(event, 'Chapter');" />
                            <button title="Add Chapter" onclick="CHANGELOGMAKER_Chapter_add()">+</button>
                            <div class="List_Content" id="Chapter_List_Content">

                            </div>
                        </div>
                    </div>
                </div>
                <div id="CHANGELOG_PREVIEW">

                </div>
            </div>
        </div>
    </div>
</body>
</html>